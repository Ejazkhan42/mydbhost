name: 'BrowserStack Test'

on:
  push:
  pull_request:

jobs:
  windows-job:
    name: 'BrowserStack Test on Windows'
    runs-on: windows-latest

    steps:
      - name: 'Checkout Repository'
        uses: actions/checkout@v2

      - name: 'Setup Python'
        uses: actions/setup-python@v2
        with:
          python-version: 3.8

      - name: 'Create Virtual Environment'
        run: |
          python -m venv venv

      - name: 'Activate Virtual Environment'
        run: |
          .\venv\Scripts\Activate

      - name: 'Install Dependencies'
        run: |
          pip install -r requirements.txt

      - name: 'BrowserStack Env Setup'
        uses: 'browserstack/github-actions/setup-env@master'
        with:
          username: 'herbertgeorge_Xy9Fsv'
          access-key: 'QDm9h2VdJz9bi2vtKwbp'
          build-name: ${{ github.run_id }}
          project-name: ${{ github.repository }}

      - name: 'BrowserStackLocal Setup'
        uses: 'browserstack/github-actions/setup-local@master'
        with:
          local-testing: start
          local-identifier: random

      - name: 'Run Pytest'
        run: |
          browserstack-sdk pytest -s test_Candidates.p # Replace 'test_script.py' with the actual name of your pytest script
